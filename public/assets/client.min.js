angular.module("comedyApp",["ngRoute","ngStorage","ngMaterial"]),angular.module("comedyApp").config(["$routeProvider","$locationProvider","$mdThemingProvider",function(a,b,c){a.when("/",{templateUrl:"/views/login.html",controller:"LoginController",controllerAs:"login"}).when("/register",{templateUrl:"/views/register.html",controller:"RegisterController",controllerAs:"register"}).when("/success",{templateUrl:"/views/success.html",controller:"WelcomeController",controllerAs:"welcome"}).when("/newjoke",{templateUrl:"/views/newjoke.html",controller:"NewJokeController",controllerAs:"newjoke"}).when("/exercises",{templateUrl:"/views/exercises.html",controller:"ExercisesController",controllerAs:"exercises"}).when("/alternates",{templateUrl:"/views/alternates.html",controller:"AlternatesController",controllerAs:"alternates"}),c.theme("default").primaryPalette("orange").accentPalette("brown").warnPalette("purple"),b.html5Mode(!0)}]),angular.module("comedyApp").controller("MainController",["$http","$mdMedia","$scope",function(a,b){function c(a){d.username=a.data}var d=this;d.message="Comedy Notebook",a.get("/getCurrentUserName").then(c),setScreensize=function(){b("xs")===!0?d.screenSize="small":d.screensize="large"},setScreensize()}]),angular.module("comedyApp").controller("LoginController",["$http","$location",function(a,b){function c(a){b.path("/success")}function d(a){b.path("/"),g.loginError=!0}function e(a){console.log("Success",a),b.path("/success")}function f(a){console.log("Failure",a),g.registerError=!0}var g=this;g.username="",g.password="",g.loginError=!1,g.registerError=!1,g.loginErrorMessage="Sorry, Wrong Username/Password",g.registerErrorMessage="Sorry, Username taken",g.login=function(){var b={};b.username=g.username,b.password=g.password,a.post("/login",b).then(c,d)},g.register=function(){var b={};b.username=g.registername,b.password=g.registerpassword,a.post("/signup",b).then(e,f)}}]),angular.module("comedyApp").controller("RegisterController",["$http","$location",function(a,b){function c(a){console.log("Success",a),b.path("/")}function d(a){console.log("Failure",a),b.path("/register"),e.error=!0}var e=this;e.username="",e.password="",e.error=!1,e.errorMessage="Sorry, Username taken",e.register=function(){var b={};b.username=e.username,b.password=e.password,a.post("/signup",b).then(c,d)}}]),angular.module("comedyApp").controller("WelcomeController",["$http","$location","$localStorage",function(a,b,c){function d(a){e.jokes=a.data,console.log("vm.jokes =",a.data),e.jokes.length<1&&(e.nojokes="To get started, click New Joke to create your first joke.",e.alljokes="")}var e=this;e.deleteStepOneButton=!0,e.deleteStepTwoButton=!1,e.nojokes="",e.alljokes="All Jokes",a.get("/getCurrentUserJokes").then(d),e.currentJokeInExercises=function(a,d,f,g,h,i,j){console.log("id:",a);e.pageData={currentId:a,currentTitle:d,currentJoke:f,currentTheme:g,currentSubject:h,currentTopic:i,currentStatements:j},c.prevPageData=e.pageData,b.path("/exercises")},e.deleteStepOne=function(){e.deleteStepOneButton=!1,e.deleteStepTwoButton=!0},e.deleteStepTwo=function(b){console.log(b),a.delete("/crud/deleteitem/"+b)}}]),angular.module("comedyApp").controller("NewJokeController",["$http","$location","DataService","$localStorage",function(a,b,c,d){function e(a){f.userId=a.data.id,b.path("/newjoke"),f.afterSave=!1,f.saved=!0,f.exerciseLink=!0}var f=this;f.title="",f.setup="",f.punchline="",f.theme="",f.subject="",f.topic="",f.afterSave=!0,f.saved=!1,f.exerciseLink=!1;var g={};f.saveJoke=function(){a.get("/getCurrentUserId").then(e),g.userId=f.userId,g.title=f.title,g.setup=f.setup,g.punchline=f.punchline,g.theme=f.theme,g.subject=f.subject,g.topic=f.topic,console.log(f.title),a.post("/postNewJoke",g)},f.goToExercises=function(){b.path("/exercises");f.pageData={currentTitle:f.title,currentJoke:f.setup,currentTheme:f.theme,currentSubject:f.subject,currentTopic:f.topic},d.prevPageData=f.pageData}}]),angular.module("comedyApp").controller("ExercisesController",["DataService","$location","$localStorage","$http",function(a,b,c,d){function e(a){c.prevPageData={currentId:a.data[0].id,currentTitle:a.data[0].title,currentJoke:a.data[0].setup_punch,currentStatements:a.data[0].statements,currentTopic:a.data[0].topics,currentTheme:a.data[0].themes,currentAltThemes:a.data[0].alt_themes,currentAltSM:a.data[0].alt_subject_matter,currentSubject:a.data[0].subject_matter,currentAltTopic:a.data[0].alt_topics},b.path("/alternates"),console.log("response.data[0]",a.data[0])}function f(a){h.exerciseName=a.data.exercise,h.exerciseDescription=a.data.description}function g(){h.updatedTextToSave=!0}var h=this;h.updatedTextToSave=!1,h.pageData=c.prevPageData,console.log("vm.pageData from exercises controller",h.pageData),console.log(h.pageData),h.viewAlternateMaterial=function(a,b){d.get("/crud/alternatematerial/"+h.pageData.currentId).then(e)},h.getRandomExercise=function(){d.get("/exerciseRandomizer").then(f)},h.replaceElement=function(a,b){h.crudUrl=a,h.text=b,d({method:"PUT",url:h.crudUrl,data:{id:h.pageData.currentId,text:h.text}}).then(g())}}]),angular.module("comedyApp").controller("AlternatesController",["$http","$location","$localStorage",function(a,b,c){var d=this;d.pageData=c.prevPageData,console.log("vm.pageData from alternates controller",d.pageData),console.log("localstorage in alternates controller",c),d.title=d.pageData.currentTitle,d.joke=d.pageData.currentJoke,d.subjectMatter=d.pageData.currentAltSM,d.topics=d.pageData.currentAltTopic,d.altThemes=d.pageData.currentAltThemes,d.replaceAltElement=function(b,c){d.altCrudUrl=b,d.altText=c,a({method:"PUT",url:d.altCrudUrl,data:{id:d.pageData.currentId,text:d.altText}})}}]),angular.module("comedyApp").factory("DataService",["$http",function(a){var b={};return{data:b}}]);